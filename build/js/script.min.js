document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("selection"),t=document.getElementById("story-container"),n=document.getElementById("logo"),a=document.getElementById("header"),s=document.getElementById("loading-gif");e.addEventListener("change",(function(){n.classList.add("animateLogo"),a.classList.add("animateHeader"),s.classList.remove("appear-on-load"),t.innerHTML="",$.ajax({method:"GET",url:"http://api.nytimes.com/svc/topstories/v2/"+this.value+".json?api-key=LfK9pjJw3UwDVJPe2KMmtjXGZvzaUFsD",dataType:"json"}).done((function(e){const t=e.results.filter((function(e){return void 0!==e.multimedia[4]})).slice(0,12);console.log(t),$.each(t,(function(e,t){$(".story-container").append(`<a class='nytimes-story' href='${t.short_url}' style='background-image:url(${t.multimedia[4].url});'> \n                        <div class='text-box' >     \n                            <h2 class="nytTitle">${t.title}</h2>\n                            <p class="nytDate">${t.byline}<br>${t.published_date}</p>\n                            <p class="nytAbstract">${t.abstract}</p>\n                        </div>\n                    </a>`)}))})).fail((function(){$(".story-container").append("<p>There seems to be an issue \n                    accessing the New York Times API \n                    at this time, we aplogize for the \n                    issue.</p>")})).always((function(){s.classList.add("appear-on-load")}))}))}));